commit fc72ccd85b962c243ea7cf5c674be91f4243dca9
Author: Ian Campbell <Ian.Campbell@citrix.com>
Date:   Fri Oct 2 11:32:10 2009 +0100

    xenserver: Correct "service vswitch status" when brcompatd is disabled

    I don't think it makes sense to report brcompatd's status when it is
    explicitly disabled. Doing so causes service status to return an error
    when brcompatd is deliberately disabled.

    Also fix up a tab vs. spaces whitespace snafu.

diff --git a/xenserver/etc_init.d_vswitch b/xenserver/etc_init.d_vswitch
--- a/xenserver/etc_init.d_vswitch
+++ b/xenserver/etc_init.d_vswitch
@@ -274,7 +274,7 @@
 
     start_vswitchd
     if [ "${ENABLE_BRCOMPAT}" = "y" ] ; then
-	start_brcompatd
+        start_brcompatd
     fi
     reload_vswitchd  # ensures ovs-vswitchd has fully read config file.
     touch /var/lock/subsys/vswitch
@@ -317,7 +317,9 @@
         ;;
     status)
         status -p "$VSWITCHD_PIDFILE" ovs-vswitchd
-        status -p "$BRCOMPATD_PIDFILE" ovs-brcompatd
+        if [ "$ENABLE_BRCOMPAT" = "y" ] ; then
+            status -p "$BRCOMPATD_PIDFILE" ovs-brcompatd
+	fi
         ;;
     version)
         /usr/sbin/ovs-vswitchd -V
